# Бот для mattermost для проведения опросов

## Настройка и развертывание

* Склонировать проект

```bash
git clone  
```

* Создать файл `.env` и скопировать в него все содержимое `example.env`;
* Поле `COMMAND_TOKEN` пока оставить пустым

* Запустить проект через докер

```bash
docker-compose up -d --build
```

### Настройка mattermost

1. Запустить файл `./add_users.sh` и получить данные для входа в аккаунт;
2. Перейти по адресу `http://localhost:8065`;
3. Войти в mattermost используя полученные логин и пароль;
4. Перейти в settings - integrations;
5. В поле "Command Trigger Word" ввести `poll`;
6. Создать новую slash команду. В поле "request_url" вставить адрес `http://http_server:8080/create`;
7. В поле "request method" оставить POST;
8. В переменную `COMMAND_TOKEN` в файле `.env` вставить полученный токен команды.

### Перезапустить проект

```bash
docker-compose up -d --build
```

## Использование

1. Перейти в канал town-square
2. Ввести команду `/poll`, заголовок и варианты ответа (формат:
   `/poll Лучший язык программирования | Go | Python | C++`)
3. При помощи кнопок появившихся в ответе можно просматривать текущие результаты опроса, закрыть опрос (закрыть опрос
   может только создатель)